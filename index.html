<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My tests | ูุณุชููุงุช ุงูุฐูุงุก ูุงูุชุญููู</title>
    <style>
        :root {
            --neon-purple: #bc13fe;
            --neon-blue: #08f7fe;
            --correct: #39ff14;
            --wrong: #ff3131;
            --bg: #0d0221;
        }
        * { box-sizing: border-box; }
        body {
            background-color: var(--bg);
            color: white;
            font-family: 'Segoe UI', Tahoma, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            overflow-x: hidden;
        }

        .brain-logo {
            width: 100px;
            height: 100px;
            margin: 0 auto 15px;
            display: block;
            filter: drop-shadow(0 0 12px var(--neon-blue));
            animation: pulse-glow 2s infinite alternate;
        }
        @keyframes pulse-glow {
            from { filter: drop-shadow(0 0 5px var(--neon-blue)); transform: scale(1); }
            to { filter: drop-shadow(0 0 25px var(--neon-blue)); transform: scale(1.05); }
        }

        .card {
            background: rgba(255, 255, 255, 0.05);
            padding: 30px;
            border-radius: 20px;
            border: 2px solid var(--neon-purple);
            box-shadow: 0 0 20px var(--neon-purple);
            width: 90%;
            max-width: 600px;
            text-align: center;
            animation: fadeIn 0.5s ease-in;
        }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        input[type="text"] {
            background: transparent; border: 2px solid var(--neon-blue); border-radius: 10px;
            padding: 12px; color: white; width: 100%; margin-bottom: 15px; text-align: center; font-size: 1rem; outline: none;
            transition: 0.3s;
        }
        
        .btn {
            background: transparent; color: white; border: 2px solid var(--neon-blue);
            padding: 15px; margin: 8px 0; width: 100%; border-radius: 12px;
            cursor: pointer; font-size: 1.1rem; transition: 0.3s; box-shadow: inset 0 0 5px var(--neon-blue);
        }
        .btn:hover { box-shadow: 0 0 20px var(--neon-blue); background: rgba(8, 247, 254, 0.1); }
        .level-btn { border-color: #f708ff; box-shadow: inset 0 0 5px #f708ff; }
        .level-btn:hover { box-shadow: 0 0 20px #f708ff; }
        
        .order-box { display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; margin: 20px 0; }
        .order-btn { background: rgba(188, 19, 254, 0.2); border: 1px dashed var(--neon-purple); color: white; padding: 10px 20px; border-radius: 8px; cursor: pointer; transition: 0.3s; }
        .order-btn.selected { opacity: 0.3; pointer-events: none; transform: scale(0.9); }
        
        .psy-item { border-bottom: 1px solid rgba(8, 247, 254, 0.2); padding: 8px 0; font-size: 0.95rem; text-align: right; }
        .psy-item b { color: var(--neon-blue); }

        .hidden { display: none !important; }
        .correct-glow { border-color: var(--correct) !important; box-shadow: 0 0 30px var(--correct) !important; background: rgba(57, 255, 20, 0.2) !important; }
        .wrong-glow { border-color: var(--wrong) !important; box-shadow: 0 0 30px var(--wrong) !important; background: rgba(255, 49, 49, 0.2) !important; }
        
        #analysis-box { text-align: right; line-height: 1.8; background: rgba(255, 255, 255, 0.08); padding: 20px; border-radius: 15px; margin-top: 20px; border: 1px solid rgba(255,255,255,0.1); }
        .report-item { background: rgba(255, 49, 49, 0.1); padding: 10px; margin-bottom: 10px; border-right: 4px solid var(--wrong); border-radius: 5px; font-size: 0.9rem; }
        .tests-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 20px; }
    </style>
</head>
<body>

    <audio id="correctAudio" src="data:audio/mpeg;base64,BASE64_HERE"></audio>

    <div class="card" id="name-view">
        <svg class="brain-logo" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M32 56C20 56 12 48 11 36C10 24 18 12 32 10C46 12 54 24 53 36C52 48 44 56 32 56Z" stroke="#08f7fe" stroke-width="1.5"/>
            <path d="M32 10V56M32 25C25 25 20 20 20 15M32 25C39 25 44 20 44 15M32 40C22 40 18 35 18 30M32 40C42 40 46 35 46 30M25 52C20 48 15 40 15 32M39 52C44 48 49 40 49 32" stroke="#08f7fe" stroke-width="1" opacity="0.6"/>
            <circle cx="32" cy="30" r="2" fill="#08f7fe"/>
        </svg>
        <h1 style="color: var(--neon-blue);">My tests</h1>
        <p>ุฃููุงู ุจู.. ูุง ูู ุงุณููุ</p>
        <input type="text" id="user-name" placeholder="ุงุฏุฎู ุงุณูู">
        <button class="btn" onclick="goToMain()">ุจุฏุก ุงูุฑุญูุฉ</button>
    </div>

    <div class="card hidden" id="main-view">
        <h2 id="welcome-msg"></h2>
        <button class="btn" onclick="showLevels()">ุงุฎุชุจุงุฑ ุงูุฐูุงุก (ูุณุชููุงุช)</button>
        <button class="btn" style="border-color: #39ff14;" onclick="showPsyLevels()">ุงูุชุญููู ุงูููุณู (ุฃูุณุงู)</button>
    </div>

    <div class="card hidden" id="levels-view">
        <h2 style="color: #f708ff;">ุงุฎุชุฑ ูุณุชูู ุงูุตุนูุจุฉ</h2>
        <button class="btn level-btn" onclick="listTests('iq_easy')">ุงููุณุชูู ุงูุณูู</button>
        <button class="btn level-btn" onclick="listTests('iq_med')">ุงููุณุชูู ุงููุชูุณุท</button>
        <button class="btn level-btn" onclick="listTests('iq_hard')">ุงููุณุชูู ุงูุนุจูุฑู</button>
        <button class="btn" onclick="backToMain()" style="border-color: gray; margin-top: 10px;">ุฑุฌูุน</button>
    </div>

    <div class="card hidden" id="tests-list-view">
        <h2 id="current-level-title" style="color: var(--neon-blue);">ุงูุงุฎุชุจุงุฑุงุช ุงููุชุงุญุฉ</h2>
        <div class="tests-grid" id="tests-buttons-container"></div>
        <button class="btn" id="back-from-list" style="border-color: gray; margin-top: 20px;">ุฑุฌูุน</button>
    </div>

    <div class="card hidden" id="quiz-view">
        <h2 id="question-text" style="min-height: 80px;"></h2>
        <div id="options-container"></div>
        <p style="color: var(--neon-blue); margin-top: 20px;">ุงูุณุคุงู <span id="q-num">1</span> / 10</p>
    </div>

    <div class="card hidden" id="deep-psy-q1">
        <h2 style="color: var(--neon-blue);">ุงููุฑุญูุฉ 1: ุชุฑุชูุจ ุงูุฃููููุงุช</h2>
        <p>ุฑุชุจ ุงูุญููุงูุงุช ุงูุชุงููุฉ ุญุณุจ ุฃูููุชูุง ูู ุญูุงุชู (ุงุถุบุท ุจุงูุชุฑุชูุจ):</p>
        <div class="order-box">
            <div class="order-btn" onclick="selectAnimal('ุญุตุงู', this)">ุญุตุงู</div>
            <div class="order-btn" onclick="selectAnimal('ุฎุฑูู', this)">ุฎุฑูู</div>
            <div class="order-btn" onclick="selectAnimal('ุจูุฑุฉ', this)">ุจูุฑุฉ</div>
            <div class="order-btn" onclick="selectAnimal('ููุฑ', this)">ููุฑ</div>
            <div class="order-btn" onclick="selectAnimal('ุฎูุฒูุฑ', this)">ุฎูุฒูุฑ</div>
        </div>
        <p id="user-order-display" style="color: var(--neon-purple); font-weight: bold;"></p>
        <button class="btn hidden" id="btn-to-psy2" onclick="switchView('deep-psy-q1', 'deep-psy-q2')">ุงููุฑุญูุฉ ุงูุชุงููุฉ</button>
    </div>
    <div class="card hidden" id="deep-psy-q2">
        <h2 style="color: var(--neon-blue);">ุงููุฑุญูุฉ 2: ุฑูุฒูุฉ ุงูุฃุดูุงุก</h2>
        <p>ุงูุชุจ ุตูุฉ ูุงุญุฏุฉ ุชุตู ุจูุง ูู ููุง ููู:</p>
        <input type="text" id="psy-dog" placeholder="ุงูููุจ ูู...">
        <input type="text" id="psy-cat" placeholder="ุงููุทุฉ ูู...">
        <input type="text" id="psy-rat" placeholder="ุงููุฃุฑ ูู...">
        <input type="text" id="psy-coffee" placeholder="ุงููููุฉ ูู...">
        <input type="text" id="psy-sea" placeholder="ุงูุจุญุฑ ูู...">
        <button class="btn" onclick="validateAndSwitch('deep-psy-q2', 'deep-psy-q3')">ุงููุฑุญูุฉ ุงูุชุงููุฉ</button>
    </div>
    <div class="card hidden" id="deep-psy-q3">
        <h2 style="color: var(--neon-blue);">ุงููุฑุญูุฉ 3: ุงูุฃููุงู ูุงููุงุณ</h2>
        <p>ุงูุชุจ ุงุณู ุดุฎุต ููุซู ูู ูู ููู ูู ุงูุฃููุงู ุงูุชุงููุฉ:</p>
        <input type="text" id="psy-yellow" placeholder="ุฃุตูุฑ">
        <input type="text" id="psy-orange" placeholder="ุจุฑุชูุงูู">
        <input type="text" id="psy-red" placeholder="ุฃุญูุฑ">
        <input type="text" id="psy-white" placeholder="ุฃุจูุถ">
        <input type="text" id="psy-green" placeholder="ุฃุฎุถุฑ">
        <button class="btn" onclick="showDeepResults()">ุฑุคูุฉ ุงูุชุญููู</button>
    </div>

    <div class="card hidden" id="psy-traits-view">
        <h2 style="color: var(--neon-blue);">ุชุญููู ุงูุตูุงุช ุงูุจุงุทููุฉ</h2>
        <input type="text" id="t-anim1" placeholder="ุงุฎุชุงุฑ ุญููุงู ุชุญุจู ูุงูุชุจ ูุนู ุซูุงุซ ุตูุงุช">
        <input type="text" id="t-anim2" placeholder="ุงุฎุชุงุฑ ุญููุงู ุซุงูู ูุงูุชุจ ูุนู ุซูุงุซ ุตูุงุช">
        <input type="text" id="t-anim3" placeholder="ุงุฎุชุงุฑ ุญููุงู ุซุงูุซ ูุงูุชุจ ูุนู ุซูุงุซ ุตูุงุช">
        <input type="text" id="t-wall" placeholder="ุงูุชุจ ุซูุงุซ ุตูุงุช ุชูุตู ูููุฉ 'ุฌุฏุงุฑ'">
        <input type="text" id="t-well" placeholder="ุงูุชุจ ุซูุงุซ ุตูุงุช ุชูุตู ูููุฉ 'ุจุฆุฑ'">
        <input type="text" id="t-sea2" placeholder="ุงูุชุจ ุซูุงุซ ุตูุงุช ุชูุตู ูููุฉ 'ุจุญุฑ'">
        <button class="btn" onclick="showTraitsResults()">ุชุญููู ุงูุฅุฌุงุจุงุช</button>
    </div>

    <div class="card hidden" id="deep-psy-q4">
        <h2 style="color: var(--neon-blue);">ุงุฎุชุจุงุฑ ุงูููุงูู ูุงููุดุงุนุฑ</h2>
        <p>ุชุฎูู ุงูููุงูู ุงูุชุงููุฉ ูุฏููู ูุดุงุนุฑู ุฃู ุชุตุฑูู ุจุงุฎุชุตุงุฑ:</p>
        <input type="text" id="psy-sea-v3" placeholder="ุฃูุช ุฃูุงู ุงูุจุญุฑุ ุงูุตู ูุดุงุนุฑู..">
        <input type="text" id="psy-forest" placeholder="ุฃูุช ูู ุงูุบุงุจุฉุ ูุง ุดุนูุฑูุ">
        <input type="text" id="psy-seagull" placeholder="ุฑุฃูุช ุทุงุฆุฑ ุงูููุฑุณุ ูุง ูุดุงุนุฑูุ">
        <input type="text" id="psy-horses" placeholder="ูุง ูู ูุธุฑุชู ุชุฌุงู ุงูุฎูููุ">
        <input type="text" id="psy-wall-v3" placeholder="ุงุนุชุฑุถ ุทุฑููู ุฌุฏุงุฑุ ูุงุฐุง ุณุชูุนูุ">
        <input type="text" id="psy-jar" placeholder="ุชุงุฆู ุจุงูุตุญุฑุงุก ููุฌุฏุช ุฌุฑุฉุ ูุงุฐุง ุณุชูุนูุ">
        <input type="text" id="psy-house" placeholder="ูุฌุฏุช ุจูุชุงู ูุฌูููุงู ุจุงูุบุงุจุฉุ ููู ุณุชุชุตุฑูุ">
        <input type="text" id="psy-fog" placeholder="ุฃูุช ูุณุท ุงูุถุจุงุจุ ูุงุฐุง ุณุชูุนูุ">
        <button class="btn" onclick="showDeepResults2()">ุฑุคูุฉ ุงูุชุญููู ุงูููุงุฆู</button>
    </div>

    <div class="card hidden" id="deep-psy-q5">
        <h2 style="color: var(--neon-blue);">ุงุฎุชุจุงุฑ ุงูุฃุจูุงุจ</h2>
        <p>ุฃูุงูู ุฎูุณ ุฃุจูุงุจ ููุฌุจ ุฃู ุชุณูู ุจุงุจุงู ูุงุญุฏุงูุ ุงุฎุชุฑ ุงูุจุงุจ ุงูุฐู ุณุชุฏุฎูู:</p>
        <div id="doors-container">
            <button class="btn" onclick="showDoorResult(1)">๐ช ุจุงุจ ููุจุญุฑ</button>
            <button class="btn" onclick="showDoorResult(2)">๐ช ุจุงุจ ููุฏููุฉ ุฑูููุฉ</button>
            <button class="btn" onclick="showDoorResult(3)">๐ช ุจุงุจ ููุฏููุฉ ุฎุฑูููุฉ</button>
            <button class="btn" onclick="showDoorResult(4)">๐ช ุจุงุจ ููุฏููุฉ ููููุฉ ูุงุฏุฆุฉ</button>
            <button class="btn" onclick="showDoorResult(5)">๐ช ุจุงุจ ููุฏููุฉ ูุชุณุงูุท ูููุง ุงูุซูุฌ</button>
        </div>
    </div>

    <div class="card hidden" id="deep-psy-q6" style="text-align: right;">
        <h2 style="color: var(--neon-blue); text-align: center;">ุงุฎุชุจุงุฑ ุฃูุบุงุฒ ุงูุนูู ุงูุจุงุทู</h2>
        <p>1- ุชุฎููู ุฃูู ุชุจุญุฑ ุจูุงุฑุจ.. ูุจุฏุฃ ุงููุงุฑุจ ูุบุฑู ุจู ูุฑุฃูุช ูุงุฑุจ ุขุฎุฑ ูุนุจุฑ ุจุฌุงูุจู ูุฐูุจุช ุฅููู ูุชูุฌู ูุตุนุฏุช ุนูู ูุชูู.</p>
        <input type="text" id="psy5-boat" placeholder="ูู ุดุฎุต ุฑุฃูุช ุนูู ููุชู ุงููุงุฑุจุ">
        
        <p>2 - ุชู ุงูุฒุงูู ุนูู ุงูุดุงุทุฆ ูุฅุนุทุงุฆู ุจุนุถ ุงูุงูุชุนู ูุงูุงุบุฑุงุถ ููู ุชุณุชุทูุน ุงููุงู ุทุฑููู ูุฑุฃูุช ุตุญุฑุงุก ูุงุญูู ุงูุงู ุนูููู ูุจุฏุฃุช ุชูุดู ุจุงูุตุญุฑุงุก ููุจุญุซ ุนู ุจุดุฑ ุทุงูุช ุฑุญูุชู ููุงูุช ูุชุนุจู ุฌุฏุง.</p>
        <input type="text" id="psy5-shoes" placeholder="ูู ุนุฏุฏ ุงุฒูุงุฌ ุงูุงุญุฐูู ุงูุชู ุงุณุชุฎุฏูุชูุง ูู ุฑุญูุชู ูู ุงูุตุญุฑุงุกุ">
        
        <p>3 - ูุฌุฃุฉ ุฑุงูุช ูุฏููู ูุจูุฑู ูุฏุฎูุช ูุฐู ุงููุฏููู ุซู ุฑุงูุช ูุตุฑุง ูุจูุฑุง ููุฑุฑุช ุงูุฏุฎูู ุงููู ูุจุนุฏ ุงูุณูุงุญ ูู ุจุนุจูุฑ ุงูุจูุงุจุงุช ุฏุฎูุช ุงูู ุงููุตุฑ ููุงู ุงูุงูู ููุฑ ุทููู ููุชูู ุจุบุฑูู ุงูููู ูุฒูุฌุชู ุฏุฎูุช ูุฐู ุงูุบุฑูู ููุฌุฏุช ุงูููู ูุฌูุณ ุนูู ูุฑุณู ุงูููููู ูุงููููู ุชุฌูุณ ุจุฌุงูุจู ููุงูุง ููุธุฑุงู ุงูู ุจุนุถููุง.</p>
        <input type="text" id="psy5-palace" placeholder="ููู ุฑุงูุช ูุธุฑุงุชูู ูุจุนุถ ุ ูุธุฑุงุช ุบุงุถุจู ูุญุจู ูุฌูููู ุงูุตููุง ุจูููุงุชู.">
        
        <p>4 - ุชุฑูุช ูุฐู ุงูุบุฑูู ููุฒูุช ุงูู ุงูุงุณูู ุนู ุทุฑูู ุฏุฑุฌ ุญูุฒููู ูุฐุง ุงูุฏุฑุฌ ุดุจู ูุธูู ููุนูู ุนูู ุฌูุงูุจู ุจุนุถ ุงููุดุงุนู ูุชููู ูู ุธููุชู ูุงุซูุงุก ูุฒููู ูุฑ ุจุฌุงูุจู ุดุฎุต [ ุงูุฑุฃู / ุฑุฌู ] ูุฐูุฑู ุจุดุฎุต ุชุนุฑูู.</p>
        <input type="text" id="psy5-stairs" placeholder="ูู ูู ูุฐุง ุงูุดุฎุต ุ">
        
        <p>5 - ูุฐุง ุงูุฏุฑุฌ ูุงุฏู ุงูู ุบุฑูู ุงูุทุนุงู ุญูุซ ุฑุงูุช ูููุง ุทุงููู ุทุนุงู ุทูููู ููู ูุณุทูุง ูุนุงุก ุฐูุจุช ูุชุฑู ููุฐู ุจุฏุงุฎูู ูุฅุฐุง ุจู ุนุตูุฑ ุจุฑุชูุงู.</p>
        <input type="text" id="psy5-juice" placeholder="ุงูู ุงู ูุฏู ูุงู ูุฐุง ุงููุนุงุก ููุชูุฆ ุจุงูุนุตูุฑ ุ">
        
        <button class="btn" onclick="showDeepResults5()" style="width: 100%;">ุฑุคูุฉ ุงูุชุญููู ุงูููุงุฆู</button>
    </div>

    <div class="card hidden" id="result-view">
        <h2 id="result-title">ุงููุชูุฌุฉ</h2>
        <h1 id="score-header"></h1>
        <div id="analysis-box">
            <div id="analysis-text"></div>
            <div id="report-container"></div>
        </div>
        <div style="display: flex; gap: 10px; margin-top: 20px;">
            <button class="btn" id="btn-back-to-list" style="border-color: var(--neon-blue);">ุฑุฌูุน ููุฃูุณุงู</button>
            <button class="btn" onclick="forceBackToHome()" style="border-color: var(--neon-purple);">ุงูุฑุฆูุณูุฉ</button>
        </div>
    </div>

    <script>
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        function playTone(freq, type, duration) {
            const osc = audioCtx.createOscillator(); const gain = audioCtx.createGain();
            osc.type = type; osc.frequency.setValueAtTime(freq, audioCtx.currentTime);
            gain.gain.setValueAtTime(0.05, audioCtx.currentTime);
            osc.connect(gain); gain.connect(audioCtx.destination);
            osc.start(); osc.stop(audioCtx.currentTime + duration);
        }
        
        const sounds = {
            click: () => playTone(600, 'sine', 0.1),
            correct: () => { playTone(800, 'sine', 0.1); setTimeout(()=>playTone(1200, 'sine', 0.1), 100); },
            wrong: () => { playTone(300, 'sawtooth', 0.2); },
            success: () => { [440, 554, 659, 880].forEach((f, i) => setTimeout(() => playTone(f, 'sine', 0.2), i*150)); }
        };

        let userName = "";
        let activeQuestions = [];
        let currentLevelKey = ""; 
        let currentIdx = 0, score = 0, wrongAnswers = [];
        let deepAnimalOrder = [];

        // ุฏุงูุฉ ุงูุชุญูู
        function checkInputs(containerId) {
            const inputs = document.querySelectorAll(`#${containerId} input[type="text"]`);
            for (let input of inputs) {
                if (input.value.trim() === "") {
                    sounds.wrong();
                    input.style.borderColor = "var(--wrong)";
                    input.focus();
                    setTimeout(() => { input.style.borderColor = "var(--neon-blue)"; }, 2000);
                    return false;
                }
            }
            return true;
        }

        const questionsBank = {
            iq_easy: [
                { q: "ูุง ูู ุงูุนุฏุฏ ุงูุฐู ูููู ุงูุณูุณูุฉ: 5ุ 10ุ 15 ...ุ", options: ["20", "25", "30"], correct: 0 },
                { q: "ุฃูููุง ุฃุซูู: ูููู ุญุฏูุฏ ุฃู ูููู ูุทูุ", options: ["ุงูุญุฏูุฏ", "ุงููุทู", "ูุชุณุงููุงู"], correct: 2 },
                { q: "ูู ููู ูู 4 ุฃุณุงุจูุนุ", options: ["24", "28", "30"], correct: 1 },
                { q: "ูุง ูู ุงูุนุฏุฏ ุงูุฐู ุจุนุฏ 999ุ", options: ["1000", "1100", "991"], correct: 0 },
                { q: "ูู ุดูุฑุงู ูู ุงูุณูุฉ ูุญุชูู ุนูู 28 ูููุงูุ", options: ["ุดูุฑ ูุงุญุฏ", "ูู ุงูุดููุฑ", "ุดูุฑูู"], correct: 1 },
                { q: "ูุง ูู ุนูุณ ูููุฉ 'ูุงุฏุฑ'ุ", options: ["ูููู", "ุดุงุฆุน", "ูุณุชุญูู"], correct: 1 },
                { q: "ูู ุฏูููุฉ ูู 3 ุณุงุนุงุชุ", options: ["120", "180", "200"], correct: 1 },
                { q: "ูุง ูู ุงูุฑูู ุงูุฐู ูุณุจู 500ุ", options: ["499", "490", "501"], correct: 0 },
                { q: "ูู ุดูุฑ ูู ูุตู ุณูุฉุ", options: ["4", "5", "6"], correct: 2 },
                { q: "1000 โ 250 = ุ", options: ["650", "750", "800"], correct: 1 },
                { q: "ูุง ูู ุงูุฑูู ุงูุฐู ุฅุฐุง ููุจุชู ูุตุจุญ ููุณูุ", options: ["6", "8", "9"], correct: 1 },
                { q: "ูู ุถูุน ูููุซูุซูู ูุนูุงุ", options: ["3", "6", "9"], correct: 1 },
                { q: "ูุง ูู ุงูุนุฏุฏ ุงููุฑุฏู ุจูู 100 ู102ุ", options: ["99", "101", "103"], correct: 1 },
                { q: "ูุง ูู ูุงุชุฌ 81 รท 9 ุ", options: ["7", "8", "9"], correct: 2 },
                { q: "ุฅุฐุง ูุงู ูุฏูู 12 ูุฑุฉ ูุฃุฎุฐุช 5ุ ูู ูุชุจููุ", options: ["12", "7", "5"], correct: 1 },
                { q: "ูู ุซุงููุฉ ูู 5 ุฏูุงุฆูุ", options: ["150", "300", "500"], correct: 1 },
                { q: "ูุง ูู ุงูุนุฏุฏ ุงูุชุงูู: 100 โ 90 โ 80 โ 70 โ ุ", options: ["65", "60", "50"], correct: 1 },
                { q: "45 รท 5 = ุ", options: ["8", "9", "10"], correct: 1 },
                { q: "ูุง ูู ุฑุจุน 64ุ", options: ["12", "14", "16"], correct: 2 },
                { q: "18 + 22 = ุ", options: ["30", "40", "50"], correct: 1 }
            ],
            iq_med: [
                { q: "ูุง ูู ุงูุนุฏุฏ ุงูุชุงูู: 3 โ 6 โ 12 โ 24 โ ุ", options: ["36", "48", "60"], correct: 1 },
                { q: "ุฅุฐุง ูุงู 5 ุนูุงู ููุฌุฒูู ุนููุงู ูู 10 ุฃูุงูุ ูู ูุญุชุงุฌ 10 ุนูุงูุ", options: ["5 ุฃูุงู", "10 ุฃูุงู", "20 ููู"], correct: 0 },
                { q: "ูุง ูู ุงูุฌุฐุฑ ุงูุชุฑุจูุนู ูู 144ุ", options: ["10", "12", "14"], correct: 1 },
                { q: "ูุง ูู ุซูุซู 90ุ", options: ["30", "45", "60"], correct: 2 },
                { q: "100 รท (5 ร 2) = ุ", options: ["10", "20", "5"], correct: 0 },
                { q: "ุฅุฐุง ูุงู ุณุนุฑ 3 ูุชุจ 90 ุฌูููุ ูู ุณุนุฑ 7 ูุชุจุ", options: ["180", "210", "240"], correct: 1 },
                { q: "25% ูู 400ุ", options: ["50", "100", "200"], correct: 1 },
                { q: "7 ร 9 โ 8 = ุ", options: ["55", "63", "56"], correct: 0 },
                { q: "18 รท 3 ร 2 = ุ", options: ["3", "12", "6"], correct: 1 },
                { q: "14 + 6 รท 3 = ุ", options: ["16", "20", "10"], correct: 0 },
                { q: "ูุง ูู ุงูุฌุฐุฑ ุงูุชูุนูุจู ูู 27ุ", options: ["3", "9", "13"], correct: 0 },
                { q: "ูุง ูู ุฑุจุน 200ุ", options: ["25", "50", "100"], correct: 1 },
                { q: "3/4 ูู 80ุ", options: ["40", "60", "20"], correct: 1 },
                { q: "11 ร 12 = ุ", options: ["122", "132", "142"], correct: 1 },
                { q: "12 ร 8 = ุ", options: ["86", "96", "106"], correct: 1 },
                { q: "120 รท 10 = ุ", options: ["10", "12", "14"], correct: 1 },
                { q: "5 ร (2 + 3) = ุ", options: ["15", "25", "30"], correct: 1 },
                { q: "ูุง ูู ุงูุนุฏุฏ ุงูุฐู ูุฑุจุนู 49ุ", options: ["6", "7", "8"], correct: 1 },
                { q: "ูู ุฏูููุฉ ูู ูููุ", options: ["1200", "1440", "1800"], correct: 1 },
                { q: "ูุง ูู ูุตู 150ุ", options: ["75", "50", "100"], correct: 0 }
            ],
            iq_hard: [
                { q: "ูุง ูู ุงูุนุฏุฏ ุงููุงูุต: 2 โ 5 โ 11 โ 23 โ ุ", options: ["35", "47", "50"], correct: 1 },
                { q: "ุฅุฐุง ูุงู: CAT = 24ุ DOG = 26 ููู ุชุณุงูู: BIRD = ุ", options: ["30", "35", "40"], correct: 1 },
                { q: "ูุง ูู ุงูุนุฏุฏ ุงูุฃููู ุจูู 50 ู60ุ", options: ["51", "53 ู59", "57"], correct: 1 },
                { q: "ุฃููู ุงูุณูุณูุฉ: 1 โ 1 โ 2 โ 3 โ 5 โ 8 โ ุ", options: ["11", "13", "15"], correct: 1 },
                { q: "ุนุฏุฏ ูููู ูู ุฑูููู ูุฌููุนููุง 12 ูุงููุฑู ุจููููุง 4ุ", options: ["7 ู5", "8 ู4", "9 ู3"], correct: 1 },
                { q: "ูุง ูู ุงูุฑูู ุงููุฑุจุน ูู 16ุ", options: ["4", "256", "32"], correct: 1 },
                { q: "ูุง ูู ูุตู 0.5 ุ", options: ["0.25", "0.1", "1.0"], correct: 0 },
                { q: "8ยฒ โ 4ยฒ = ุ", options: ["32", "48", "64"], correct: 1 },
                { q: "ูุง ูู ุงูุนุฏุฏ ุงูุชุงูู: 2 โ 6 โ 7 โ 21 โ 22 โ ุ", options: ["66", "44", "23"], correct: 0 },
                { q: "ุฅุฐุง ูุงู 8 ุนูุงู ููุฌุฒูู ุนููุงู ูู 4 ุฃูุงูุ ูู ูุญุชุงุฌ 4 ุนูุงูุ", options: ["2 ููู", "8 ุฃูุงู", "16 ููู"], correct: 1 },
                { q: "ูุง ูู ุงูุนุฏุฏ ุงูุชุงูู: 1 โ 4 โ 9 โ 16 โ ุ", options: ["20", "25", "30"], correct: 1 },
                { q: "ูุง ูู ุงูุฌุฐุฑ ุงูุชุฑุจูุนู ูู 196ุ", options: ["14", "16", "18"], correct: 0 },
                { q: "ูู ุฃุณุจูุน ุชูุฑูุจูุง ูู ุณูุชููุ", options: ["52", "100", "104"], correct: 2 },
                { q: "15ยฒ = ุ", options: ["225", "250", "300"], correct: 0 },
                { q: "ูุง ูู ูุงุชุฌ 3ยณ + 2ยฒ ุ", options: ["13", "31", "35"], correct: 1 },
                { q: "6ยฒ + 4ยฒ = ุ", options: ["40", "52", "100"], correct: 1 },
                { q: "5ยณ = ุ", options: ["75", "125", "225"], correct: 1 },
                { q: "ุฑูู ูู ูุณูุชู ุนูู 4 ุซู ุทุฑุญุช 4 ูุงู ุงููุงุชุฌ 4ุ", options: ["16", "32", "48"], correct: 1 },
                { q: "ูุง ูู ูุตู ุฑุจุน 160ุ", options: ["20", "40", "80"], correct: 0 },
                { q: "ูุง ูู ุงูุนุฏุฏ ุงูุฐู ูุฑุจุนู 169ุ", options: ["12", "13", "14"], correct: 1 }
            ]
        };

        function goToMain() {
            let inputEl = document.getElementById('user-name');
            let inputVal = inputEl.value.trim();
            if (inputVal === "") {
                sounds.wrong(); inputEl.style.borderColor = "var(--wrong)"; inputEl.focus();
                setTimeout(() => { inputEl.style.borderColor = "var(--neon-blue)"; }, 1000);
                return;
            }
            userName = inputVal; sounds.click();
            document.getElementById('name-view').classList.add('hidden');
            document.getElementById('main-view').classList.remove('hidden');
            document.getElementById('welcome-msg').innerText = "ุฃููุงู ุจู ูุง " + userName;
        }

        function switchView(from, to) { sounds.click(); document.getElementById(from).classList.add('hidden'); document.getElementById(to).classList.remove('hidden'); }
        
        function validateAndSwitch(from, to) {
            if(checkInputs(from)) switchView(from, to);
        }

        function showLevels() { switchView('main-view', 'levels-view'); }
        function backToMain() { switchView('levels-view', 'main-view'); }

        function showPsyLevels() {
            sounds.click();
            const container = document.getElementById('tests-buttons-container');
            container.innerHTML = "";
            let tests = ["ุงุฎุชุจุงุฑ 1", "ุงุฎุชุจุงุฑ 2", "ุงุฎุชุจุงุฑ 3", "ุงุฎุชุจุงุฑ 4", "ุงุฎุชุจุงุฑ 5"];
            let views = ['deep-psy-q1', 'psy-traits-view', 'deep-psy-q4', 'deep-psy-q5', 'deep-psy-q6'];
            
            tests.forEach((t, i) => {
                let btn = document.createElement('button'); btn.className = 'btn level-btn'; btn.innerText = t;
                btn.onclick = () => { sounds.click(); switchView('tests-list-view', views[i]); };
                container.appendChild(btn);
            });

            document.getElementById('back-from-list').onclick = () => switchView('tests-list-view', 'main-view');
            document.getElementById('btn-back-to-list').onclick = () => switchView('result-view', 'tests-list-view');
            switchView('main-view', 'tests-list-view');
        }

        function listTests(levelKey) {
            sounds.click(); currentLevelKey = levelKey;
            const container = document.getElementById('tests-buttons-container'); container.innerHTML = "";
            const totalQuestions = questionsBank[levelKey].length;
            const numberOfTests = Math.ceil(totalQuestions / 10);
            for (let i = 0; i < numberOfTests; i++) {
                let btn = document.createElement('button'); btn.className = 'btn level-btn'; btn.innerText = `ุงุฎุชุจุงุฑ ${i + 1}`;
                btn.onclick = () => startSpecificTest(i); container.appendChild(btn);
            }
            document.getElementById('back-from-list').onclick = () => switchView('tests-list-view', 'levels-view');
            document.getElementById('btn-back-to-list').onclick = () => switchView('result-view', 'tests-list-view');
            switchView('levels-view', 'tests-list-view');
        }

        function startSpecificTest(testIdx) {
            sounds.click(); currentIdx = 0; score = 0; wrongAnswers = [];
            activeQuestions = questionsBank[currentLevelKey].slice(testIdx * 10, (testIdx * 10) + 10);
            switchView('tests-list-view', 'quiz-view'); loadQuestion();
        }

        function loadQuestion() {
            let qData = activeQuestions[currentIdx];
            document.getElementById('question-text').innerText = qData.q;
            document.getElementById('q-num').innerText = currentIdx + 1;
            let optionsDiv = document.getElementById('options-container'); optionsDiv.innerHTML = "";
            qData.options.forEach((opt, index) => {
                let btn = document.createElement('button'); btn.className = 'btn'; btn.innerText = opt;
                btn.onclick = () => checkAnswer(index, btn); optionsDiv.appendChild(btn);
            });
        }

        function checkAnswer(choice, btn) {
            let qData = activeQuestions[currentIdx];
            document.querySelectorAll('#options-container .btn').forEach(b => b.style.pointerEvents = 'none');
            if (choice === qData.correct) { btn.classList.add('correct-glow'); sounds.correct(); score++; }
            else { btn.classList.add('wrong-glow'); sounds.wrong(); wrongAnswers.push({ q: qData.q, correct: qData.options[qData.correct] }); }
            setTimeout(() => { currentIdx++; if (currentIdx < activeQuestions.length) loadQuestion(); else showResults(); }, 700);
        }

        function showResults() {
            sounds.success(); document.getElementById('quiz-view').classList.add('hidden');
            document.getElementById('result-view').classList.remove('hidden');
            let analysisBox = document.getElementById('analysis-text');
            let reportContainer = document.getElementById('report-container'); reportContainer.innerHTML = "";
            let percent = (score / activeQuestions.length) * 100;
            document.getElementById('score-header').innerText = "ุงูุฏุฑุฌุฉ: " + percent + "%";
            let msg = (percent >= 90) ? "ููุงู ุฒููู ุฌุฏูุฏ ๐ค๐๐๐ป" : (percent >= 80) ? "ุงู ุงูุฐูุงุก ุงูุฎุงุฑู ุฏู ุจุฑูุณ๐๐ป๐" : (percent > 60) ? "ุฌุฏุน ูุงุจุงุดุงโบ๏ธ" : (percent == 50) ? "ูููุณ ุจุณ ุดุฏ ุญููู ุงููุฑู ุงูุฌุงููโบ๏ธ" : (percent >= 30) ? "ุนููู ุฑุงูุญ ููู ๐โบ๏ธ" : "ุฑูุญ ุฏูุฑ ุนูู ุนููู ูุชุนุงูู ุชุงูู ๐";
            analysisBox.innerHTML = `ูุง ${userName}ุ ${msg}`;
            if (wrongAnswers.length > 0) {
                let html = "<h3 style='color:var(--wrong)'>ุงูุฃุฎุทุงุก ูุชุตุญูุญูุง:</h3>";
                wrongAnswers.forEach(item => html += `<div class="report-item">โ ${item.q}<br>โ ุงูุญู: ${item.correct}</div>`);
                reportContainer.innerHTML = html;
            }
        }

        function showTraitsResults() {
            if(!checkInputs('psy-traits-view')) return;
            sounds.success(); document.getElementById('psy-traits-view').classList.add('hidden');
            document.getElementById('result-view').classList.remove('hidden');
            document.getElementById('score-header').innerText = "ุงูุชุญููู ุงูููุณู 2";
            document.getElementById('report-container').innerHTML = ""; // ุชุตููุฑ ุงูุฃุฎุทุงุก
            document.getElementById('analysis-text').innerHTML = `
                <div style="text-align:right">
                    <div class="psy-item">ูุตูู ููุญููุงู 1 (<b>${document.getElementById('t-anim1').value}</b>): ูุธุฑุชู ูููุณู.</div>
                    <div class="psy-item">ูุตูู ููุญููุงู 2 (<b>${document.getElementById('t-anim2').value}</b>): ูุธุฑุฉ ุงููุงุณ ูู.</div>
                    <div class="psy-item">ูุตูู ููุญููุงู 3 (<b>${document.getElementById('t-anim3').value}</b>): ููู ุชุจู ุชููู.</div>
                    <div class="psy-item">ูุตูู ููุฌุฏุงุฑ (<b>${document.getElementById('t-wall').value}</b>): ูุธุฑุชู ููููุช.</div>
                    <div class="psy-item">ูุตูู ููุจุฆุฑ (<b>${document.getElementById('t-well').value}</b>): ูุธุฑุชู ูููุฌูููุณ.</div>
                    <div class="psy-item">ูุตูู ููุจุญุฑ (<b>${document.getElementById('t-sea2').value}</b>): ูุธุฑุชู ููุญูุงุฉ.</div>
                </div>`;
        }

        function selectAnimal(animal, el) {
            if (!deepAnimalOrder.includes(animal)) {
                deepAnimalOrder.push(animal); el.classList.add('selected');
                document.getElementById('user-order-display').innerText = "ุชุฑุชูุจู: " + deepAnimalOrder.join(" โ ");
                if (deepAnimalOrder.length === 5) document.getElementById('btn-to-psy2').classList.remove('hidden');
            }
        }

        function showDeepResults() {
            if(!checkInputs('deep-psy-q3')) return;
            sounds.success(); document.getElementById('deep-psy-q3').classList.add('hidden');
            document.getElementById('result-view').classList.remove('hidden');
            document.getElementById('score-header').innerText = "ุงูุชุญููู ุงูููุณู 1";
            document.getElementById('report-container').innerHTML = "";
            const animalMap = { "ุญุตุงู": "ุงูุนุงุฆูุฉ", "ุฎุฑูู": "ุงูุญุจ", "ุจูุฑุฉ": "ุงูุนูู", "ููุฑ": "ุนุฒุฉ ุงูููุณ", "ุฎูุฒูุฑ": "ุงููุงู" };
            let html = `<div style="text-align:right"><h3>ุชุญูููู ุงูุดุฎุตู ูุง ${userName}:</h3>`;
            deepAnimalOrder.forEach((a, i) => html += `<div class="psy-item">ูุฑูุฒ ${i+1}: ${a} (ูุฏู ุนูู <b>${animalMap[a]}</b>)</div>`);
            html += `<div class="psy-item">ุงูููุจ ูู: <b>${document.getElementById('psy-dog').value}</b> (ูุฏู ุนูู ูุตูู ูููุณู)</div>`;
            html += `<div class="psy-item">ุงููุทุฉ ูู: <b>${document.getElementById('psy-cat').value}</b> (ูุฏู ุนูู ูุตูู ูุดุฑูู ุญูุงุชู)</div>`;
            html += `<div class="psy-item">ุงููุฃุฑ ูู: <b>${document.getElementById('psy-rat').value}</b> (ูุฏู ุนูู ูุตูู ูุฃุนุฏุงุฆู)</div>`;
            html += `<div class="psy-item">ุงููููุฉ ูู: <b>${document.getElementById('psy-coffee').value}</b> (ูุฏู ุนูู ูุธุฑุชู ููุฌูููุณ)</div>`;
            html += `<div class="psy-item">ุงูุจุญุฑ ูู: <b>${document.getElementById('psy-sea').value}</b> (ูุฏู ุนูู ูุธุฑุชู ูุญูุงุชู)</div>`;
            html += `<hr style="opacity:0.2">`;
            html += `<div class="psy-item">ุงูุฃุตูุฑ: <b>${document.getElementById('psy-yellow').value}</b> (ุดุฎุต ูุง ุชูุณุงู ุฃุจุฏุงู)</div>`;
            html += `<div class="psy-item">ุงูุจุฑุชูุงูู: <b>${document.getElementById('psy-orange').value}</b> (ุตุฏูู ููู ุญูุงู)</div>`;
            html += `<div class="psy-item">ุฃุญูุฑ: <b>${document.getElementById('psy-red').value}</b> (ุดุฎุต ุชุญุจู ุจุตุฏู)</div>`;
            html += `<div class="psy-item">ุงูุฃุจูุถ: <b>${document.getElementById('psy-white').value}</b> (ุชูุฃู ุฑูุญู)</div>`;
            html += `<div class="psy-item">ุฃุฎุถุฑ: <b>${document.getElementById('psy-green').value}</b> (ุดุฎุต ุณุชุชุฐูุฑู ุฏุงุฆูุงู)</div></div>`;
            document.getElementById('analysis-text').innerHTML = html;
        }

        function showDeepResults2() {
            if(!checkInputs('deep-psy-q4')) return;
            sounds.success(); document.getElementById('deep-psy-q4').classList.add('hidden');
            document.getElementById('result-view').classList.remove('hidden');
            document.getElementById('score-header').innerText = "ุชุญููู ุงูููุงูู ูุงููุดุงุนุฑ";
            document.getElementById('report-container').innerHTML = "";
            let html = `<div style="text-align:right"><h3>ูุชุงุฆุฌ ุชุญูููู ูุง ${userName}:</h3>`;
            html += `<div class="psy-item">ูุตูู ููุจุญุฑ (<b>ุงูุญูุงุฉ</b>): ${document.getElementById('psy-sea-v3').value}</div>`;
            html += `<div class="psy-item">ูุตูู ููุบุงุจุฉ (<b>ุงูุนุงุฆูุฉ</b>): ${document.getElementById('psy-forest').value}</div>`;
            html += `<div class="psy-item">ูุตูู ููููุฑุณ (<b>ุงููุณุงุก</b>): ${document.getElementById('psy-seagull').value}</div>`;
            html += `<div class="psy-item">ูุตูู ููุฎููู (<b>ุงูุฑุฌุงู</b>): ${document.getElementById('psy-horses').value}</div>`;
            html += `<div class="psy-item">ุชุตุฑูู ูุน ุงูุฌุฏุงุฑ (<b>ุงููุดุงูู</b>): ${document.getElementById('psy-wall-v3').value}</div>`;
            html += `<div class="psy-item">ุชุตุฑูู ูุน ุงูุฌุฑุฉ (<b>ุงูุดุฑูู</b>): ${document.getElementById('psy-jar').value}</div>`;
            html += `<div class="psy-item">ุชุตุฑูู ูุน ุงูุจูุช (<b>ุงูุฒูุงุฌ</b>): ${document.getElementById('psy-house').value}</div>`;
            html += `<div class="psy-item">ูุดุงุนุฑู ูู ุงูุถุจุงุจ (<b>ุงูููุช</b>): ${document.getElementById('psy-fog').value}</div></div>`;
            document.getElementById('analysis-text').innerHTML = html;
        }

        function showDoorResult(doorNum) {
            sounds.success();
            document.getElementById('deep-psy-q5').classList.add('hidden');
            document.getElementById('result-view').classList.remove('hidden');
            document.getElementById('score-header').innerText = "ุชุญููู ุงุฎุชูุงุฑ ุงูุจุงุจ";
            document.getElementById('report-container').innerHTML = "";
            let doorData = [
                { title: "ุจุงุจ ุงูุจุญุฑ", content: "โข <b>ุงูุญุฑูุฉ:</b> ุจุงููุณุจุฉ ูู ุงูุญุฑูุฉ ูู ูู ุดูุก...<br>โข <b>ุงูุงุณุชููุงููุฉ:</b> ุชุญุจ ุจูุงุก ููุณู...<br>โข <b>ุงูุชุฃูู:</b> ุชูุฑู ุงูุงุณุชุนุฌุงู..." },
                { title: "ุจุงุจ ููุฏููุฉ ุฑูููุฉ", content: "โข <b>ุงูุฎุตูุตูุฉ:</b> ุฃูุช ุดุฎุตูุฉ ูุชุญูุธุฉ...<br>โข <b>ุงูุชูุฑุฏ:</b> ุทุฑููุฉ ุชูููุฑู ูุฑูุฏุฉ...<br>โข <b>ุงูุนูุงูุงุช:</b> ุชุชูุงุตู ุฌูุฏุงู..." },
                { title: "ุจุงุจ ููุฏููุฉ ุฎุฑูููุฉ", content: "โข <b>ุงูุญูููุฉ:</b> ุดุฎุตูุชู ููุนูุฉ ุจุงูุญูุงุณ...<br>โข <b>ุงูุงุฌุชูุงุนูุฉ:</b> ุชุญุจ ุงูุชุฎุงูุท...<br>โข <b>ุงููุถูู:</b> ูุฑุถู ูุถููู..." },
                { title: "ุจุงุจ ููุฏููุฉ ููููุฉ ูุงุฏุฆุฉ", content: "โข <b>ุงูุบููุถ:</b> ุฃูุช ุดุฎุตูุฉ ุบูุฑ ูุชููุนุฉ...<br>โข <b>ุงูุงูุฏูุงุน:</b> ุชุณุนู ุฅูู ุงูุชุทูุฑ...<br>โข <b>ุงูุนูููุฉ:</b> ุชุชุตุฑู ุจุนูููุฉ..." },
                { title: "ุจุงุจ ููุฏููุฉ ูุชุณุงูุท ูููุง ุงูุซูุฌ", content: "โข <b>ุงูุนูู:</b> ุฃูุช ุดุฎุตูุฉ ุนูููุฉ ุงูุชูููุฑ...<br>โข <b>ุงููุฏูุก:</b> ุชูุฑู ุงูุตุฎุจ...<br>โข <b>ุงูุฑุงุญุฉ ูู ุงููุญุฏุฉ:</b> ูุฏ ุชูุถู ุณุงุนุงุช ุจููุฑุฏู..." }
            ];
            let selected = doorData[doorNum-1];
            document.getElementById('analysis-text').innerHTML = `<div style="text-align:right"><h3 style="color:var(--neon-blue)">ููุฏ ุงุฎุชุฑุช: ${selected.title}</h3><div class="psy-item">${selected.content}</div></div>`;
        }

        function showDeepResults5() {
            if(!checkInputs('deep-psy-q6')) return;
            sounds.success();
            document.getElementById('deep-psy-q6').classList.add('hidden');
            document.getElementById('result-view').classList.remove('hidden');
            document.getElementById('score-header').innerText = "ุชุญููู ุฃูุบุงุฒ ุงูุนูู ุงูุจุงุทู";
            document.getElementById('report-container').innerHTML = "";
            let html = `<div style="text-align:right"><h3>ูุชุงุฆุฌ ุชุญูููู ูุง ${userName}:</h3>`;
            html += `<div class="psy-item">1/ ุนุฏุฏ ุงูุงุดุฎุงุต ุงูุฐูู ุฑุฃูุชูู ุนูู ุงููุงุฑุจ ููุซู : ุนุฏุฏ ุงูุงุดุฎุงุต ุงููุฎูุตูู ุงูุฐูู ุชููููู. (<b>${document.getElementById('psy5-boat').value}</b>)</div>`;
            html += `<div class="psy-item">2/ ุนุฏุฏ ุงุฒูุงุฌ ุงูุงุญุฐูู ุงูุชู ุฑุงูุชูุง ุชูุซู : ุนุฏุฏ ุงููุฑุงุช ุงูุชู ุงุญุจุจุช ูู ุญูุงุชู ! (<b>${document.getElementById('psy5-shoes').value}</b>)</div>`;
            html += `<div class="psy-item">3/ ุญุงูู ุงูููู ูุงููููู ุชูุซู : ููู ุชุชุฎูู ุดุฑูู ุญูุงุชู ูุนู. (<b>${document.getElementById('psy5-palace').value}</b>)</div>`;
            html += `<div class="psy-item">4/ ุงูุดุฎุต ุงูุฐู ุฑุงูุชู ูู ุงูุฏุฑุฌ ููุซู: ูู ุงูุดุฎุต ุงูุฐู ุณุชุจูู ุชุชุฐูุฑู ูุงุฎุฑ ููู ูู ุญูุงุชู. (<b>${document.getElementById('psy5-stairs').value}</b>)</div>`;
            html += `<div class="psy-item">5/ ุงูู ุงู ูุฏู ูุงู ุงููุนุงุก ููุชูุฆ ุจุงูุนุตูุฑ ููุซู : ูู ุชุถุญู ุงูุช ูุงุฌู ูู ุชุญุจ ููุงุฌู ุงุตุฏูุงุฆู. (<b>${document.getElementById('psy5-juice').value}</b>)</div></div>`;
            document.getElementById('analysis-text').innerHTML = html;
        }

        function forceBackToHome() {
            sounds.click(); document.querySelectorAll('.card').forEach(c => c.classList.add('hidden'));
            document.getElementById('main-view').classList.remove('hidden');
            deepAnimalOrder = []; document.querySelectorAll('.order-btn').forEach(b => b.classList.remove('selected'));
            document.getElementById('user-order-display').innerText = "";
            if(document.getElementById('btn-to-psy2')) document.getElementById('btn-to-psy2').classList.add('hidden');
            document.querySelectorAll('input[type="text"]').forEach(input => { if(input.id !== 'user-name') input.value = ""; });
            document.getElementById('report-container').innerHTML = "";
        }
    </script>
</body>
</html>
